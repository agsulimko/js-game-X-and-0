{"mappings":"qhBAAAA,EAAA,S,iBAEA,MACMC,EAAOC,SAASC,cAAc,mBAelB,WACd,IAAIC,EAAWC,aAAaC,QAjBd,uBAmBd,GADAC,QAAQC,IAAIJ,GACRA,EAAU,CACVA,EAAWK,KAAKC,MAAMN,GAEAO,OAAOC,QAAQR,GACvBS,SAAQ,UAAUC,EAAQC,IACnCd,EAAKe,SAASF,GAAQG,MAAQF,GAAS,E,KAtBpDG,GA4CAjB,EAAKkB,iBAAiB,QAASC,EAAAC,EAAA,EA1CC,SAAVC,GACjB,IAAIC,EAAWlB,aAAaC,QALf,uBAObiB,EAAWA,EAAWd,KAAKC,MAAMa,GAAY,GAE7CA,EAASD,EAAME,OAAOC,MAAQH,EAAME,OAAOP,MAI3CZ,aAAaqB,QAbA,sBAamBjB,KAAKkB,UAAUJ,G,GAiCC,MACpDtB,EAAKkB,iBAAiB,UAjBvB,SAAsBG,GAClBA,EAAMM,iBACN,MAAQZ,UAAUa,MAAEA,EAAKC,QAAEA,IAAcR,EAAMS,cAE/C,GAAoB,KAAhBF,EAAMZ,OAAkC,KAAlBa,EAAQb,MAC9B,OAAOe,MAFU,kCAGd,CACH,IAAIT,EAAWd,KAAKC,MAAML,aAAaC,QArC7B,wBAsCVC,QAAQC,IAAIe,GAEZD,EAAMS,cAAcE,QACpB5B,aAAa6B,WAzCH,uBA0CVX,EAAW,E","sources":["src/js/03-feedback.js"],"sourcesContent":["import { keys } from '@vimeo/player';\nimport throttle from 'lodash.throttle';\nconst LOCAL_KEY = 'feedback-form-state';\nconst form = document.querySelector(\".feedback-form\");\nhandlerFillForm();\n// перезаписываем из  хранилища данные \n function onFormInput(event) { \n     let formData = localStorage.getItem(LOCAL_KEY);\n    //  console.log(formData);\n     formData = formData ? JSON.parse(formData) : {};\n    //   console.log(formData);\n     formData[event.target.name] = event.target.value;\n    //  console.log(formData[event.target.name]);\n    //   console.log(event.target.name);\n     \n     localStorage.setItem(LOCAL_KEY, JSON.stringify(formData));\n };\n// проверяем хранилище \nfunction handlerFillForm() {\n    let saveData = localStorage.getItem(LOCAL_KEY);\n    console.log(saveData);\n    if (saveData) {\n        saveData = JSON.parse(saveData)\n        // console.dir(saveData);  \n        const arraySaveData = Object.entries(saveData);\n        arraySaveData.forEach(function([number, index]) {\n             form.elements[number].value = index || '';\n            // console.log(form.elements[number].value);\n           \n        });\n    };\n};\nfunction onFormSubmit(event) {\n    event.preventDefault();\n    const { elements: { email, message } } = event.currentTarget;\n    const messageAlert = \"Please fill in all the fields!\";\n    if (email.value === \"\" || message.value === \"\") {\n        return alert(messageAlert);\n    } else {\n        let formData = JSON.parse(localStorage.getItem(LOCAL_KEY));\n        console.log(formData);\n        //    Чистим поля формы и хранилище\n        event.currentTarget.reset();\n        localStorage.removeItem(LOCAL_KEY);\n        formData = {};\n    };\n\n};\nform.addEventListener('input', throttle(onFormInput, 500)); \n form.addEventListener('submit', onFormSubmit);\n\n\n\n\n\n\n\n\n\n"],"names":["parcelRequire","$945622fd0f572e60$var$form","document","querySelector","saveData","localStorage","getItem","console","log","JSON","parse","Object","entries","forEach","number","index","elements","value","$945622fd0f572e60$var$handlerFillForm","addEventListener","$parcel$interopDefault","$9OeKo","event","formData","target","name","setItem","stringify","preventDefault","email","message","currentTarget","alert","reset","removeItem"],"version":3,"file":"03-feedback.bd0d764c.js.map"}